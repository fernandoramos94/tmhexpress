<?php

use App\Http\Controllers\OrderController;
use App\Http\Controllers\StopController;
use Illuminate\Support\Facades\Route;
use Illuminate\Support\Facades\Storage;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/

Route::get('/', function () {
    return view('welcome');
});

Route::get('print_guide/{id}',[OrderController::class, 'printOrder']);
Route::get('download_list/{id}',[OrderController::class, 'downloadOrder']);

Route::get("send/{id}", [StopController::class, 'sendEmail']);
Route::get("em", function() {
    return view('mail.recoveryPassword');
});

Route::get('/prueba', function(){
    // echo base_path().'\tmhexpress-ce05c9f8c653.json';

    $img = "data:image/png;base64,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";
    $name = "3.". explode('/', explode(':', substr($img, 0, strpos($img, ';')))[1])[1];
    $disk = Storage::disk('gcs');
    $disk->put($name, file_get_contents($img));

    $disk->setVisibility($name, 'public');
    $url = $disk->url($name);

    echo $url;
});
